<ons-page id="status">
    <script>
        var source = new EventSource("/events");
        source.onmessage = function (event) {
            console.log(event.data);
            data=JSON.parse(event.data);
            console.log(data);

            // document.getElementById("result").innerHTML = event.data + "<br>";
            document.querySelector('#cat-weight').textContent=data.scale_weight;
            if (data.scale_weight_unstable===true)
                document.querySelector("#cat-weight-unstable").style.display="";
            else
                document.querySelector("#cat-weight-unstable").style.display="none";
            

            // document.querySelector('#food-weight').textContent=data.food_weight;

        }
        source.onerror = function (error) {
            console.log(error);
            // document.getElementById("result").innerHTML += "EventSource error:" + error + "<br>";
        }
    </script>

    <ons-list>
        <ons-list-header>Actual status</ons-list-header>

        <ons-list-item>
            <div class="left">
                <ons-icon icon="spinner" spin class="list-item__icon" id='cat-weight-unstable'></ons-icon>
            </div>
            <div class="center">
                Cat scale
            </div>
            <div class="right" id='cat-weight'>
                ...
            </div>
        </ons-list-item>

        <ons-list-item>
            <div class="left">
                <ons-icon icon="spinner" spin class="list-item__icon"></ons-icon>
            </div>
            <div class="center">
                Food scale
            </div>
            <div class="right" id='food-weight'>
                ...
            </div>
        </ons-list-item>


        <ons-list-header>Cat</ons-list-header>

        <ons-list-item>
            <div class="center">
                Status
            </div>
            <div class="right" id='cat-weight'>
                Gone
            </div>
        </ons-list-item>

        <ons-list-item>
            <div class="center">
                Name
            </div>
            <div class="right" id='cat-weight'>
                ...
            </div>
        </ons-list-item>

        <ons-list-item>
            <div class="center">
                Average weight
            </div>
            <div class="right" id='cat-weight'>
                ...
            </div>
        </ons-list-item>

        <ons-list-item>
            <div class="center">
                Ate
            </div>
            <div class="right" id='cat-weight'>
                ...
            </div>
        </ons-list-item>


    </ons-list>



</ons-page>